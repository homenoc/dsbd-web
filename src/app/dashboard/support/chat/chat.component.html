<div class="talk">
  <div class="left">
    <!--  Issue #37-->
    <br>
    <h1>Chat</h1>
    <br>
    <ng-container *ngIf="!loading">
      <ng-container *ngFor="let d of ticket.chat">
        <ng-container *ngIf="!d.admin">
          <div class="talk_right">
            <p>{{d.username}} ({{d.time}}):<br>------------------------------------<br>{{d.data}}</p>
          </div>
          <br>
        </ng-container>
        <ng-container *ngIf="d.admin">
          <div class="talk_left">
            <p>運営 ({{d.time}}):<br>------------------------------------<br>{{d.data}}</p>
          </div>
          <br>
        </ng-container>
      </ng-container>
      <ng-container *ngFor="let d of this.supportService.chatMessage">
        <ng-container *ngIf="!d.admin">
          <div class="talk_right">
            <p>{{d.username}} ({{d.time}})
              :<br>------------------------------------<br>{{d.message}}</p>
          </div>
          <br>
        </ng-container>
        <ng-container *ngIf="d.admin">
          <div class="talk_left">
            <p>運営 ({{d.time}}):<br>------------------------------------<br>{{d.message}}</p>
          </div>
          <br>
        </ng-container>
      </ng-container>
    </ng-container>
    <br>
  </div>
</div>
<div class="left" *ngIf="!solved">
  <br>
  <ng-container *ngIf="!this.supportService.webSocketConnect">
    <p>サーバとの接続が切断されたため、5秒後に再接続します。</p>
  </ng-container>
  <form>
    <mat-form-field class="large-width">
      <mat-label>Comment</mat-label>
      <textarea matInput rows="3" placeholder="" [formControl]="comment" name=""></textarea>
    </mat-form-field>
  </form>
  <br>
  <ng-container *ngIf="this.supportService.webSocketConnect">
    <button mat-button (click)="sendMessage()">Send</button>
  </ng-container>
  <ng-container *ngIf="!this.supportService.webSocketConnect">
    <button mat-button disabled (click)="sendMessage()">Send</button>
  </ng-container>
  <br>
  <br>
</div>
